{% extends 'base.html' %} 

{% block title %}Adicionar Novo Serviço{% endblock %}

{% block content %}
  {# Mensagens Flash de Erro #}
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        {% if category == 'danger' %} 
          <div class="bg-red-500 text-white p-4 rounded-lg mb-6 flex justify-between items-center shadow-lg" role="alert">
            <span>{{ message }}</span>
            <button type="button" onclick="this.parentElement.remove()">
              <span class="material-symbols-outlined">close</span>
            </button>
          </div>
        {% endif %}
      {% endfor %}
    {% endif %}
  {% endwith %}

  {# Card principal com o formulário #}
  <div class="bg-surface-dark rounded-xl shadow-lg overflow-hidden">
    <div class="p-6 border-b border-gray-700">
      <h2 class="text-xl font-bold text-text-primary-dark">Adicionar Novo Serviço</h2>
    </div>
    <div class="p-6">
      <form method="POST">
        {# --- CORREÇÃO DEFINITIVA: Sintaxe correta para passar variáveis --- #}
        {% include '_form_servico.html' with context %}
        {# ------------------------------------------------------------- #}
      </form>
    </div>
  </div>

{% endblock %}

{# --- CORREÇÃO DEFINITIVA: Definir as variáveis para o formulário no contexto #}
{% set form_data = form_data | default({}) %}
{% set submit_button_text = 'Adicionar Serviço' %}
{# ------------------------------------------------------------- #}