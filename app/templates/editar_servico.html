{% extends 'base.html' %} {# Usa o layout base #}

{# Recebe 'servico' (o objeto do banco) e 'form_data' (para preencher) da rota #}

{% block title %}Editar Serviço - {{ servico.nome }}{% endblock %}

{% block content %}
  {# Mensagens Flash de Erro (se a validação falhar) #}
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        {% if category == 'danger' %} 
          <div class="bg-red-500 text-white p-4 rounded-lg mb-6 flex justify-between items-center shadow-lg" role="alert">
            <span>{{ message }}</span>
            <button type="button" onclick="this.parentElement.remove()">
              <span class="material-symbols-outlined">close</span>
            </button>
          </div>
        {% endif %}
      {% endfor %}
    {% endif %}
  {% endwith %}

  {# Card principal com o formulário #}
  <div class="bg-surface-dark rounded-xl shadow-lg overflow-hidden">
    <div class="p-6 border-b border-gray-700">
      <h2 class="text-xl font-bold text-text-primary-dark">Editar Serviço: {{ servico.nome }}</h2>
    </div>
    <div class="p-6">
      {# O formulário envia os dados via POST para a MESMA rota (/servicos/editar/<id>) #}
      <form method="POST">
        {# Inclui o template do formulário, passando os dados preenchidos e o texto do botão #}
        {% include '_form_servico.html' with context %}
      </form>
    </div>
  </div>

{% endblock %}

{# Define as variáveis para o formulário incluído #}
{% set form_data = form_data %} {# Vem da rota #}
{% set submit_button_text = 'Salvar Alterações' %}