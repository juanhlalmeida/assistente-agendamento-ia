{% extends 'base.html' %}

{% block content %}
<div class="container mx-auto px-4 py-8 max-w-4xl">
    
    <div class="flex items-center gap-4 mb-8">
        <a href="{{ url_for('main.admin_painel_novo') }}" class="p-2 rounded-lg bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white transition-colors">
            <span class="material-symbols-outlined text-2xl">arrow_back</span>
        </a>
        <div>
            <h1 class="text-3xl font-bold text-white">Planos & Pre√ßos üí≥</h1>
            <p class="text-gray-400 text-sm">Ajuste o valor das assinaturas em tempo real</p>
        </div>
    </div>

    <div class="grid gap-6">
        {% for plano in planos %}
        <div class="bg-surface-dark p-6 rounded-2xl border border-white/10 shadow-lg flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-primary/50 transition-colors">
            
            <div class="flex-1">
                <div class="flex items-center gap-3 mb-2">
                    <h3 class="text-xl font-bold text-white">{{ plano.nome }}</h3>
                    {% if plano.ativo %}
                        <span class="px-2 py-0.5 rounded text-[10px] font-bold bg-green-500/20 text-green-400 border border-green-500/20">ATIVO</span>
                    {% else %}
                        <span class="px-2 py-0.5 rounded text-[10px] font-bold bg-gray-500/20 text-gray-400 border border-gray-500/20">INATIVO</span>
                    {% endif %}
                </div>
                <p class="text-gray-400 text-sm mb-4">{{ plano.descricao or 'Sem descri√ß√£o definida.' }}</p>
                
                <div class="flex flex-wrap gap-3 text-xs text-gray-500 font-mono">
                    <span class="bg-black/30 px-2 py-1 rounded">üë§ {{ plano.max_profissionais }} Profissionais</span>
                    <span class="bg-black/30 px-2 py-1 rounded">‚úÇÔ∏è {{ plano.max_servicos }} Servi√ßos</span>
                    {% if plano.tem_ia %}<span class="text-purple-400">‚ú® IA Inclusa</span>{% endif %}
                </div>
            </div>

            <form action="{{ url_for('main.admin_planos') }}" method="POST" class="bg-background-dark p-5 rounded-xl border border-white/5 flex flex-col gap-4 w-full md:w-auto min-w-[280px] shadow-inner">
                <input type="hidden" name="plano_id" value="{{ plano.id }}">
                
                <div class="flex flex-col">
                    <label class="text-xs font-bold text-gray-500 mb-1 uppercase tracking-wider">Nome Comercial</label>
                    <input type="text" name="novo_nome" value="{{ plano.nome }}" class="bg-surface-dark border border-white/10 rounded-lg px-3 py-2 text-white text-sm focus:border-primary focus:outline-none transition-colors">
                </div>

                <div class="flex flex-col">
                    <label class="text-xs font-bold text-gray-500 mb-1 uppercase tracking-wider">Valor Mensal</label>
                    <div class="relative">
                        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-green-500 font-bold">R$</span>
                        <input type="text" name="novo_preco" value="{{ '%.2f'|format(plano.preco_mensal) }}" class="bg-surface-dark border border-white/10 rounded-lg pl-10 pr-3 py-2 text-white font-bold w-full focus:border-green-500 focus:outline-none transition-colors">
                    </div>
                </div>

                <button type="submit" class="mt-2 bg-primary hover:bg-primary/80 text-white text-sm font-bold py-2.5 px-4 rounded-lg transition-all transform active:scale-95 shadow-lg shadow-primary/20">
                    Salvar Altera√ß√µes
                </button>
            </form>

        </div>
        {% endfor %}
    </div>

</div>
{% endblock %}
